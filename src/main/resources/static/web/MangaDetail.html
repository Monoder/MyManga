<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/public-frame.css">
    <link rel="stylesheet" href="../css/MangaDetail.css">
    <script src="../js/frame/jquery-3.6.0.js"></script>
    <style>
        @supports (display:grid) {
            .manga_gld {
                display: grid;
                grid-template-columns:repeat(5, 1fr)
            }

            .wrapper_content {
                min-width: 250px;
                max-width: 400px
            }

            @media screen and (max-width: 1360px) {
                .manga_gld {
                    grid-template-columns:repeat(4, 1fr)
                }

                .wrapper_content:nth-child(8n+1), .wrapper_content:nth-child(8n+3), .wrapper_content:nth-child(8n+6), .wrapper_content:nth-child(8n+8) {
                    background-color: rgba(72, 61, 139, 0.3);
                }

                .wrapper_content:nth-child(8n+2), .wrapper_content:nth-child(8n+4), .wrapper_content:nth-child(8n+5), .wrapper_content:nth-child(8n+7) {
                    background-color: rgba(72, 61, 139, 0.3);
                }
            }
            @media screen and (max-width: 1090px) {
                .manga_gld {
                    grid-template-columns:repeat(3, 1fr)
                }

                .wrapper_content:nth-child(2n+1) {
                    background-color: rgba(72, 61, 139, 0.3);
                }

                .wrapper_content:nth-child(2n+2) {
                    background-color: rgba(72, 61, 139, 0.3);
                }
            }
            @media screen and (max-width: 820px) {
                .manga_gld {
                    grid-template-columns:repeat(2, 1fr)
                }

                .wrapper_content:nth-child(4n+1), .wrapper_content:nth-child(4n+4) {
                    background-color: rgba(72, 61, 139, 0.3);
                }

                .wrapper_content:nth-child(4n+2), .wrapper_content:nth-child(4n+3) {
                    background-color: rgba(72, 61, 139, 0.3);
                }
            }
        }


    </style>

</head>
<body>
<!-- Navigation-->
<script src="../js/NavigationBar.js"></script>

<!-- Body -->
<div class="page_content" style="max-width:1370px">
    <!-- BodyHeader -->

    <h1 class="head_title">[Highware] Spoils of Victory (Pokemon)[DoreaMR233汉化]</h1>
    <div id="head_wrapper">
        <div class="head_form_wrapper">

            <div id="head_left">
                <div style="width: 100%;height: 100%;">
                    <img src="" alt="">
                </div>
            </div>

            <div id="head_mid">
                <div id="head_mid_detail">
                    <div id="hm_detail_cate">
                        <div class="wrapper_category cat_choose_04">Western</div>
                    </div>
                    <div id="hm_detail_artist"><a href="">Dorae_MR_233</a></div>
                    <div id="hm_detail_info">
                        <table>
                            <tr>
                                <td class="hm_detail_info_c1">Posted:</td>
                                <td class="hm_detail_info_c2">2021-04-16 12:54</td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">Parent:</td>
                                <td class="hm_detail_info_c2"><a href="">1889252</a></td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">Visible:</td>
                                <td class="hm_detail_info_c2">Yes</td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">Language:</td>
                                <td class="hm_detail_info_c2">Chinese &nbsp;<span class="halp"
                                                                                  title="This gallery has been translated from the original language text.">TR</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">File Size:</td>
                                <td class="hm_detail_info_c2">189.6 MB</td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">Length:</td>
                                <td class="hm_detail_info_c2">31 pages</td>
                            </tr>
                            <tr>
                                <td class="hm_detail_info_c1">Favorited:</td>
                                <td class="hm_detail_info_c2" id="favcount">964 times</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="head_mid_tag">
                    <div id="tag_list">
                        <table>
                            <tr>
                                <td class="tag_list_c1">language:</td>
                                <td>
                                    <div id="td_language:chinese" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_language:chinese" href="" class=""
                                           onclick="return toggle_tagmenu('language:chinese',this)">chinese</a>
                                    </div>
                                    <div id="td_language:translated" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_language:translated" href="" class=""
                                           onclick="return toggle_tagmenu('language:translated',this)">translated</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">parody:</td>
                                <td>
                                    <div id="td_parody:pokemon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_parody:pokemon" href="" class=""
                                           onclick="return toggle_tagmenu('parody:pokemon',this)">pokemon | pocket
                                            monsters</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">artist:</td>
                                <td>
                                    <div id="td_artist:highware" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_artist:highware" href="" class=""
                                           onclick="return toggle_tagmenu('artist:highware',this)">highware</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">male:</td>
                                <td>
                                    <div id="td_male:blackmail" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_male:blackmail" href="" class=""
                                           onclick="return toggle_tagmenu('male:blackmail',this)">blackmail</a>
                                    </div>
                                    <div id="td_male:shotacon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_male:shotacon" href="" class=""
                                           onclick="return toggle_tagmenu('male:shotacon',this)">shotacon</a>
                                    </div>
                                    <div id="td_male:sole_male" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_male:sole_male" href="" class=""
                                           onclick="return toggle_tagmenu('male:sole male',this)">sole male</a>
                                    </div>
                                    <div id="td_male:toddlercon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_male:toddlercon" href="" class=""
                                           onclick="return toggle_tagmenu('male:toddlercon',this)">toddlercon</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">female:</td>
                                <td>
                                    <div id="td_female:ahegao" class="tag_list_c2" style="opacity:1.0"><a
                                            id="ta_female:ahegao" href="" class=""
                                            onclick="return toggle_tagmenu('female:ahegao',this)">ahegao</a>
                                    </div>
                                    <div id="td_female:anal" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:anal" href="" class=""
                                           onclick="return toggle_tagmenu('female:anal',this)">anal</a>
                                    </div>
                                    <div id="td_female:ball_sucking" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:ball_sucking" href="" class=""
                                           onclick="return toggle_tagmenu('female:ball sucking',this)">ball sucking</a>
                                    </div>
                                    <div id="td_female:bisexual" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:bisexual" href="" class=""
                                           onclick="return toggle_tagmenu('female:bisexual',this)">bisexual</a>
                                    </div>
                                    <div id="td_female:blackmail" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:blackmail" href="" class=""
                                           onclick="return toggle_tagmenu('female:blackmail',this)">blackmail</a>
                                    </div>
                                    <div id="td_female:bukkake" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:bukkake" href="" class=""
                                           onclick="return toggle_tagmenu('female:bukkake',this)">bukkake</a>
                                    </div>
                                    <div id="td_female:gokkun" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:gokkun" href="" class=""
                                           onclick="return toggle_tagmenu('female:gokkun',this)">gokkun</a>
                                    </div>
                                    <div id="td_female:humiliation" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:humiliation" href="" class=""
                                           onclick="return toggle_tagmenu('female:humiliation',this)">humiliation</a>
                                    </div>
                                    <div id="td_female:layer_cake" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:layer_cake" href="" class=""
                                           onclick="return toggle_tagmenu('female:layer cake',this)">layer cake</a>
                                    </div>
                                    <div id="td_female:lolicon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:lolicon" href="" class=""
                                           onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>
                                    <div class="tag_list_c2" style="opacity:1.0">
                                        <a href="" class="" onclick="return toggle_tagmenu('female:lolicon',this)">lolicon</a>
                                    </div>

                                    <div id="td_female:multimouth_blowjob" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:multimouth_blowjob" href="" class=""
                                           onclick="return toggle_tagmenu('female:multimouth blowjob',this)">multimouth
                                            blowjob</a>
                                    </div>
                                    <div id="td_female:shimaidon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:shimaidon" href="" class=""
                                           onclick="return toggle_tagmenu('female:shimaidon',this)">shimaidon</a>
                                    </div>
                                    <div id="td_female:sister" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:sister" href="" class=""
                                           onclick="return toggle_tagmenu('female:sister',this)">sister</a>
                                    </div>
                                    <div id="td_female:toddlercon" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:toddlercon" href="" class=""
                                           onclick="return toggle_tagmenu('female:toddlercon',this)">toddlercon</a>
                                    </div>
                                    <div id="td_female:twins" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:twins" href="" class=""
                                           onclick="return toggle_tagmenu('female:twins',this)">twins</a>
                                    </div>
                                    <div id="td_female:x-ray" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_female:x-ray" href="" class=""
                                           onclick="return toggle_tagmenu('female:x-ray',this)">x-ray</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">mixed:</td>
                                <td>
                                    <div id="td_mixed:ffm_threesome" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_mixed:ffm_threesome" href="" class=""
                                           onclick="return toggle_tagmenu('mixed:ffm threesome',this)">ffm threesome</a>
                                    </div>
                                    <div id="td_mixed:group" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_mixed:group" href="" class=""
                                           onclick="return toggle_tagmenu('mixed:group',this)">group</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="tag_list_c1">other:</td>
                                <td>
                                    <div id="td_other:comic" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_other:comic" href="" class=""
                                           onclick="return toggle_tagmenu('other:comic',this)">comic</a>
                                    </div>
                                    <div id="td_other:full_color" class="tag_list_c2" style="opacity:1.0">
                                        <a id="ta_other:full_color" href="" class=""
                                           onclick="return toggle_tagmenu('other:full color',this)">full color</a>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>

                </div>

            </div>

        </div>
    </div>

    <!-- BodyContent -->
    <div id="body_wrapper">
        <p class="info"></p>

        <table class="page_bar" style="margin:2px auto 0px">
            <tr>
                <td class="page_change">&lt;</td>
                <td class="page_num"><a href="" onclick="return false">1</a></td>
                <td class="page_change">&gt;</td>
            </tr>
        </table>

        <!-- 从后端获取数据 ajax 加入该类中 -->
        <div class="manga_wrapper  manga_gld">
            <!--
            <div class="gdtl" style="height:319px">
                    <div>
                            <a href="">
                                <img alt="01" title="Page 1: 00_SpoilsOfVictory_Cover.png" src="">
                            </a>
                            </div>
                        </div>
            -->
        </div>


        <table class="page_bar" style="margin:0px auto">
            <tr>
                <td class="page_change">&lt;</td>
                <td class="page_num"><a href="" onclick="return false">1</a></td>
                <td class="page_change">&gt;</td>
            </tr>
        </table>
    </div>
    <p class="info">
    </p>
</div>

</body>
<script>
    let mainGuid = getUrlParam( "mainGuid" );

    $( document ).ready( function () {
        // 加载封面
        $.ajax( {
            type: "post",
            datatype: "String",
            data: { guid: mainGuid },
            url: "/MangaInfo/getWrapper",
            success: function ( wrapperSource ) {
                // manga_img 需要在 success 中进行取值，不然会一直为遍历最后一个值
                $( "#head_left img" ).attr( "src", wrapperSource );
                $( "#head_left div" ).removeAttr( "style" )
            }
        } );

        $.ajax( {
            type: "post",
            datatype: "String",
            data: { "mainGuid": mainGuid },
            url: "/MangaDetail/listMangaDetailByPage",
            success: function ( result ) {

                let listMangaDetail = result.list;
                let pageSize = result.size;

                $( "#body_wrapper .info" ).text( "Showing " + result.total + " results" );


                // 遍历添加 Dom 节点框架
                for ( let i = 0; i < pageSize; i++ ) {
                    let detailGuid = listMangaDetail[ i ].guid;
                    let detailId = listMangaDetail[ i ].id;
                    let detailMainGuid = listMangaDetail[ i ].mainGuid;

                    $( ".manga_wrapper" ).append(
                            "           <div class=\"gdt\" style=\"max-height:319px; max-width: 239px\">\n" +
                            "               <div style=\"height:340px;width:240px;top:-2px; \">\n" +
                            "                   <a href=\"\">\n" +
                            "                       <img style=\"object-fit: contain;\" id=\"" + detailGuid + "\"  title=\"" + detailId + "\" src=\"\" alt=\"" + detailId + "\" />\n" +
                            "                   </a>\n" +
                            "               </div>\n" +
                            "            </div>"
                    );
                }

                // 遍历，在框架中根据封面 Guid 请求图片流，并进行添加
                for ( let i = 0; i < pageSize; i++ ) {
                    let detailGuid = $( ".manga_wrapper img" )[ i ].id;
                    $.ajax( {
                        type: "post",
                        datatype: "String",
                        data: { guid: detailGuid },
                        url: "/MangaDetail/getThumbnail",
                        success: function ( thumbnail ) {
                            // manga_img 需要在 success 中进行取值，不然会一直为遍历最后一个值
                            let manga_img = $( ".manga_wrapper img" ).eq( i );
                            manga_img.attr( "src", thumbnail );
                            $( "div.gdtl div" ).removeAttr( "style" );
                        }
                    } );
                }


            }
        } );
    } );


    function getUrlParam( name ) {
        //构造一个含有目标参数的正则表达式对象
        let reg = new RegExp( "(^|&)" + name + "=([^&]*)(&|$)" );
        //匹配目标参数
        let r = window.location.search.substr( 1 ).match( reg );
        if ( r != null ) return unescape( r[ 2 ] );
        //返回参数值
        return null;
    }

</script>
</html>